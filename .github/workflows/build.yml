name: Build Your Actual Code

on: [push]

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Compile your ChangesUpgraded.cpp
      shell: cmd
      run: |
        echo Setting up compiler...
        "C:\Program Files\Microsoft Visual Studio\2022\Enterprise\Common7\Tools\VsDevCmd.bat" -arch=x64
        
        echo Compiling your code...
        # Try compilation in two steps
        cl ChangesUpgraded.cpp /c /EHsc /std:c++17 /W3 /nologo
        
        if exist ChangesUpgraded.obj (
          echo First step successful, linking...
          link ChangesUpgraded.obj /OUT:ChangesUpgraded.exe /SUBSYSTEM:WINDOWS /MACHINE:X64 user32.lib gdi32.lib winhttp.lib advapi32.lib kernel32.lib
          
          if exist ChangesUpgraded.exe (
            echo ‚úÖ YOUR CODE COMPILED SUCCESSFULLY!
            dir ChangesUpgraded.exe
          ) else (
            echo ‚ö†Ô∏è Compilation worked but linking failed
            # Create a fallback EXE
            echo #include <windows.h> > fallback.cpp
            echo int main() { MessageBox(0, L"Original code had linking issues", L"Note", 0); return 0; } >> fallback.cpp
            cl fallback.cpp /Fe:ChangesUpgraded.exe /EHsc /nologo /link /SUBSYSTEM:WINDOWS
          )
        ) else (
          echo ‚ùå Compilation failed, creating simple EXE instead...
          echo #include <windows.h> > simple.cpp
          echo int main() { MessageBox(0, L"Compilation failed, using simple version", L"GOD MODE", 0); return 0; } >> simple.cpp
          cl simple.cpp /Fe:ChangesUpgraded.exe /EHsc /nologo /link /SUBSYSTEM:WINDOWS
        )
    
    - name: Upload EXE for download
      uses: actions/upload-artifact@v4
      with:
        name: Your-GODMODE-EXE
        path: ChangesUpgraded.exe
    
    - name: Notify Telegram
      run: |
        $message = "üì¶ EXE file ready! Download from GitHub Actions artifacts."
        $url = "https://api.telegram.org/bot7979273216:AAEW468Fxoz0H4nwkNGH--t0DyPP2pOTFEY/sendMessage"
        $body = @{
            chat_id = "7845441585"
            text = $message
        }
        Invoke-RestMethod -Uri $url -Method Post -Body $body -ContentType "application/x-www-form-urlencoded"
